╔══════════════════════════════════════════════════════════════════════════╗
║                    VIRTIO BLOCK DRIVER - QUICK TEST GUIDE                 ║
╚══════════════════════════════════════════════════════════════════════════╝

QUICK START:
┌──────────────────────────────────────────────────────────────────────────┐
│ ./test-virtio-block.sh                                                   │
└──────────────────────────────────────────────────────────────────────────┘

MANUAL LAUNCH:
┌──────────────────────────────────────────────────────────────────────────┐
│ qemu-system-x86_64 -kernel embodios.elf -m 2G \                          │
│     -drive file=test.img,format=raw,if=virtio -serial stdio             │
└──────────────────────────────────────────────────────────────────────────┘

TEST COMMANDS (in EMBODIOS shell):
┌──────────────────────────────────────────────────────────────────────────┐
│ Command     │ Purpose                                                    │
├─────────────┼────────────────────────────────────────────────────────────┤
│ blkinfo     │ Show VirtIO device info (should show 10MB device)         │
│ blktest     │ Run I/O tests (all 5 tests should PASS)                   │
│ blkdevs     │ List block devices (should show "vda")                     │
│ loadmodel   │ Test block_read_bytes (expected to fail, but no crash)    │
└─────────────┴────────────────────────────────────────────────────────────┘

EXPECTED BOOT OUTPUT:
┌──────────────────────────────────────────────────────────────────────────┐
│ Scanning PCI bus...                                                      │
│ VirtIO block device at I/O port 0xc000                                   │
│   Capacity: 20480 sectors (10 MB)                                        │
│   Sector size: 512 bytes                                                 │
│ Registered block device: vda (10 MB, 20480 sectors)                      │
└──────────────────────────────────────────────────────────────────────────┘

EXPECTED BLKTEST OUTPUT:
┌──────────────────────────────────────────────────────────────────────────┐
│ === VirtIO Block Tests ===                                               │
│ Test 1: Read sector 0... PASS                                            │
│   Data: 45 4d 42 4f 44 49 4f 53 20 54 45 53 54 ...                       │
│ Test 2: Read 8 sectors... PASS (read 4096 bytes)                         │
│ Test 3: Read sector 100... PASS                                          │
│ Test 4: Write sector 1000... PASS                                        │
│ Test 5: Verify write... PASS                                             │
└──────────────────────────────────────────────────────────────────────────┘

EXIT QEMU:
┌──────────────────────────────────────────────────────────────────────────┐
│ Press: Ctrl-A then X                                                     │
└──────────────────────────────────────────────────────────────────────────┘

ACCEPTANCE CRITERIA:
┌──────────────────────────────────────────────────────────────────────────┐
│ ✅ VirtIO block device detected at boot                                  │
│ ✅ Device shows correct capacity (10 MB, 20480 sectors)                  │
│ ✅ blktest passes all 5 tests                                            │
│ ✅ blkinfo shows device details                                          │
│ ✅ loadmodel calls block_read_bytes() without crash                      │
└──────────────────────────────────────────────────────────────────────────┘

TROUBLESHOOTING:
┌──────────────────────────────────────────────────────────────────────────┐
│ Problem             │ Solution                                           │
├─────────────────────┼────────────────────────────────────────────────────┤
│ QEMU not found      │ brew install qemu (macOS)                          │
│                     │ apt install qemu-system-x86 (Linux)                │
├─────────────────────┼────────────────────────────────────────────────────┤
│ No VirtIO device    │ Check -drive parameter is correct                  │
├─────────────────────┼────────────────────────────────────────────────────┤
│ Kernel won't boot   │ Rebuild: cd kernel && make                         │
└─────────────────────┴────────────────────────────────────────────────────┘

FILES:
┌──────────────────────────────────────────────────────────────────────────┐
│ embodios.elf              - Kernel binary (1.0 MB)                       │
│ test.img                  - Test disk image (10 MB)                      │
│ test-virtio-block.sh      - Test launcher script                         │
│ TESTING-VIRTIO-BLOCK.md   - Complete documentation                       │
│ SUBTASK-2-1-SUMMARY.md    - Detailed task summary                        │
└──────────────────────────────────────────────────────────────────────────┘

For detailed documentation, see: TESTING-VIRTIO-BLOCK.md
